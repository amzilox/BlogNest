<% const { banner: { url: bannerURL }, title, content, updatedAt } =
locals.currentBlog; const compressedBannerURL = bannerURL ?.replace('upload/',
'upload/w_960,h_420,c_auto/q_auto,f_auto/'); %>

<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../layouts/head', {title: 'Edit blog | BlogNest'}) %>
    <!-- Axios CDN -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script type="module" src="/js/script.js" defer></script>
  </head>
  <body>
    <%- include('../partials/top_app_bar') %>

    <main class="main">
      <article class="page create-blog-page">
        <div class="container">
          <h2 class="page-title text-on-surface headline-small">Create blog</h2>

          <form class="blog-write-form" data-form>
            <div class="image-field-wrapper">
              <label for="banner" class="btn filled-tonal">
                <input
                  type="file"
                  name="banner"
                  accept="image/*"
                  data-image-field
                  id="banner"
                />
                <span class="material-symbols-rounded leading-icon">
                  cloud_upload
                </span>

                <p class="label-large">Upload image</p>

                <div class="state-layer"></div>
              </label>

              <p class="text label-large text-on-surface-variant">
                Use a ratio of 21:9 for best results. <br />Only JPEG and PNG
                with max size of 5MB
              </p>

              <div class="image-preview image-cover show" data-image-preview>
                <img
                  src="<%=compressedBannerURL%>"
                  alt="<%=title%>"
                  class="img-cover"
                />
              </div>

              <button
                type="button"
                class="icon-btn filled-tonal"
                data-image-preview-clear
              >
                <span class="material-symbols-rounded"> delete </span>
                <div class="state-layer"></div>
              </button>
            </div>

            <input
              type="text"
              name="title"
              arial-label="Blog title"
              placeholder="Article Title ..."
              required
              class="title-field headline-large"
              value="<%=title%>"
            />
            <textarea
              name="content"
              arial-label="Blog content"
              placeholder="Write your post content here ..."
              required
              data-textarea-auto-height
              class="textarea body-large"
            >
<%=content%></textarea
            >

            <div class="footer-actions">
              <button class="btn btn-fill" data-submit-btn>
                <p class="label-large">Save changes</p>

                <div class="state-layer"></div>
              </button>
            </div>
          </form>
        </div>
      </article>
    </main>

    <!-- 
      - #FOOTER
    -->
    <%- include('../layouts/footer') %>

    <!--
      #SNACKBAR
    -->
    <div class="snackbar-wrapper" data-snackbar-wrapper></div>
  </body>
</html>
